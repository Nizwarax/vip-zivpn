#!/bin/bash

# --- LOADER ---
if [[ $(ps -o args= -p $$) == *"bash -x"* || $(ps -o args= -p $$) == *"sh -x"* ]]; then
    echo "Debugging is not allowed." >&2
    exit 1
fi

__run_protected() {
    local encrypted_content='U2FsdGVkX19qnNP774HP9twa3uhmB/keMxFfxtYPBaaBXnMIl1pXogG6hBMZeI/G4EeO2aZTG8w2Frj8RLMcUDWhpj/KaFS5+8Rwxy9emh6bWRyT3xkv/a9BJci+hxZKUPDWOkxBd9YqikAkp9YYaX3mpmHwXoMTnoSsTplo0CRx4U5nR6oVL9A7Z4ntpyf0pbGJBUgu6l1XdhsrepfKkyQ/CxnQ5Cb+uiuDSJEOATRsjf6FIExIU0KX61nIzY7LXaYlhNpizwgsCCSlLsWsMqn8hNFfqZ6MmCa0YI9F+/acttgs3TeMHt2mL4YJYABrWBQ0Aji6DNFYUNeKMqwZwtusfRWDkd1+038nf+OgHNNycZgpwjtncH1BdSFRs6sRkfVajjneIFWtvF3DNbuB03uuejybnBFNNgf4/bIwDIoJ5KdbXWEGKtBGETBkY3mku5IO5G/wRpx4Zb9BWaZpZUQcUIekTk31YDtOq6oYeiLRJKxzlt3lh1cJ1Ad+rkk+TePuGJZVGSl10PfyIpTjSmuHPjW7YQP6AXNANTW/altIUnCt78G62MAuVAiUsLo1uEYqCpHAEbmkxHrMfXrz/SbYIkvBB7+4HuGAeDeJUrMkBUfymSgosEazeVTIDdEGVC1mZacrfP9Nyol4lIbceQTS+yIpk5Ga2MHSStY6tdaA1bABzdXJf4Se3Ez2Jiok3kOs2Rh9aRgU/ViJx0+LO5ZzCuIGId47hGUkCwEH3vx34L3HNm/Pc8lpZ729rPcAQ2w+ARnEbU0O/zytGYB6Zg9ijzgYd+sC9Db28BCibYLHqC4KoRq0z6MbSXZ63ANhNVAAq4DWDRGEeg7z5JI6RBR65KuBAxb1POMCP5S2abn4qvHn/IY1H/Z+0hyKTqs97Q1kJQvFsejfhQEGCTV9LrtYqPhpMo+Nmnuu415TsAfdUeU9jijczQa70OQx/oYfC662ORyCxJBPSpfze7Zq+4fJdCohL1TkU+0Y+fyJXHq1NYASxdwZHtidEDrs6U/ao7ziMwHZ1urWCOF2JmiV9E4xLCPWsVlnh321WTADLJNiPgT3OYI7UaM0K0GdAyPqW7qi2WZ6HuNp6iAGVmbKMMD4Z5r3mbfol9eSHhYEU2xPvr1xbrVFpuvkSd/obNcAQDMLdXeTKfoMmY8iFQgy16QKtoT6gZ9D/6ndmEeudWYnNLkBCmzU7NdziCe14XiEpHkzfkF7pTwJnYmzr1+9LPtmKI3RBJe5nud3y+UotwCyJjzluyHqvAvnEQ5ARMhMS0xrjRBrMJDFjB6sEmUwYy4MdEYBmWFTqj6ek2WuDPzHSg20t3CyaZQ5+4oKo5v7ygytRe2xhrDHRCPz4akxILNuvTNxrSBucUin7q71ZvSeu6BRiqtBO5cRma1zzoZ8tdguMM19tmK72RrVNvnFHV1aAuLwvObQw5b+OHO3uPmdRIcTJAQKwAI/kH+iRCKahes6cL8gzgtSTHVmqdOAbkKEzrcKmaNHtgFZXVLLMw1El7Ph1N28xmy52BK5q9EmKOhybRyRfPSxmP+mEw/TF9eQzGXKnhR1S3kQiPsuIDuZPMPslhsAfGBFsLUFiMhD9Sqz+gm/WZVuXk9gMlxmBpsunOz1/RYNtrmEk29nK2MFAKnaf+Vw94gAmutVOYLlT62LvFYGbJAW/mGLEssnIWvFTZkxhFkFQ7uzXLGyPv9LGm97taT9IAGBXtRSdY4qrLOVkMGhzDfOjQt5sTvbZ1aS+u+vsmdt/KBMnY02084233m25Qoc1JUFaOJ1T0tkMUM7gu1UNsv0sHmllsb/Kdxd6eY7JqjX0xIEPx7//+S/Wo7Fd5V8Qse9mAy+3AuttgN83rwwooEzysshKsXQWhimZB+ZD8TB3hRJmXpVq/hpXcw0UpCI1nLYgRXjL+LreVmgdru9ae+4kqO/CQSclMksn5GyG2c9BBKIuN47dcD/BuZqNMg4b9ynaomcGIKJZGDLp5hfaqUMbBDRABQfAQaPeVjGC3BFGp/Y2blIPZ56suA38Us7KvpYkLMkTWpBucGOizN8Ko0pgUefoDHTOsri21AQQx9iDSUZ8mWuiMXUSfC9e6YcfDC1K6RB9oX56DQTX4KeR3QLYQIUo8Dn7f3JKJWlt1d+ufCJgIgYBeeS5vsoCcwvezrRcdAKpqPQInZwifSjpY3NVRUnDZYBDbqmIrHkHF2TwKYj/oNylRAGaurBxFTO5WnlEQ8U9qD91tqwH0PYZX8SKtYQlQfZsn7AyNGXeSuChANKMz0ydtPR9o0QkVdvMQUyF42WrvKT1d7CoRCNCJ9vOQ0lMQlpIDK0hT0LfnpwW3kZCthwbt7AectaRPkbeHEbyvTNkySQgvT4S035kbFPkoMj7W1Ay11dpRSq/yUbCb+GeWpuhWXZnCdw3dcsm5w9HIhh/4vW0/hPu/KyHiWDezqIrrFLnTw4uj3YBhtwjXgRDurKXH/oByUGMOsmsQTFRaNbWlBpWQz0XYjDLXOH3YXd0rJsoQwuHA6yKSD1+gOaTrx5nRaer3eVXqIKVOpm4+nZpyjLGtwJJ8YJnNoSTx9c1daQZBe8204twRisCFdvRQP/+rghnyFYMyn21wFCWAwmgxfmU3enu6FpVgvr56NWkD0+tUIqX3RdxgnzEkXYCSq2ovU2Xdgdc+9czhMj+gFpr2D+YxrLj6obwO7OEUVAajRM95GW/U+5+8ecwkQfqf8g5S2gld2eGL0p4qha1XlFi7JFSPbdj7Dl8j5uJEZEQuiw4FISObt2bHm2QlSNdDHUJv0yr6bmdeUPE5wdJ5apRonvR07h4tAyCc9/AZH9LnSZoCxrHsO7WdZh5BTAoQPotd8g4bwNSdwtTiyEjhOi49nU4G97Phn1h8cZRY4Rxzmv1AhfD+R7O7XX2nfLTPuOjzJQXqgO8K/F71C6DIA647MWQzec5PSslQ3dfCEb+ZEzcQB1LUo2yOE5ExxjX/YsidWefpbskGmGoMs+sUdVYyiIN0c7hVriaDuWSWvjMWAqTFXlkMY6zMc/uduh5tPiVORhNmRpONxoDnPXXrL0plgPROnXUdMYPiojUM6ReMzYF3haFIX0REKwF70mkOXm2tK/wa8KFUG2lSvglkpgZg2zP4vNPvmViZoQ+qHzo5IBhT4VY/tWtKFuBW+JJfb9q7h1prUs7N8nMfKYjGqGPx3yhCaMIiIVANUYHuwJ/xhcFnN1A9Yl36JJkCD1uBiEQBZMpDErflCRfaBQW0GW1XQTNgre6eIuN4deQ1i64WhGn83P5cuu8hoKon/kjZ+1jMuyn2hu6ck9/+WvToM+1JlyRKnyUYeFj7xjV5kIS8oxWtuxopWBLehr2jGdafD+cZ68iEXa2Fi2LNvXcvOb+a2/rrI38x0T15kxdfr11uhF40j5weLte+3tq40GMtOdPxu+CR92pO4oktaarfCLkjEIQkqnMnyV+BnvAiXUP+CK+MhMZF15F7On2fDc+zpWqA+7WouK5zPa/BQYDFEPSF3DnyfDUJVqWmoVFKjjA0vPG7JaRD5SjFsRg7Zu3CE+bH/puyN09rUfi647KPbfy8Cwy4ffgD+KCIpgdiUAbDNsqioows2KN/HACE6KQP93dh7DbRufOLeQAhWV+8fjEIG6SvCn0Z6Yxq1DvKMXtskhDhGBf3t2SlbkBG3iczyOeHDTyT0w4U8BGxr2s37yD+YLE6P3Jt7/5KnE2MZggBNl9EfPzwpkGC4lD/jjfZol/Zx2MT1zs4wSInzCD0X+xgT0zPtLN1brY4DVB371PtOZE9jrDHmnmn9MiF4CcSdUVq2S4Bm5yxpT8s8o9b6VyVEz9yFywnPsu0eA/iasJz+xPCJ3BbRX5bNZXhO6Cdox+v2qn639edW0NtbXMXpW/3tFeHbBHziVKkIY+shtr/hKyu59cftMe3aaBFzyqBATL4ytcrjpUfdpocXh+PadsoK5cBT4lnosSrG6Vw2wsU+aCCWOlDQS2oEYI3Q4ns13wjMtoYedPmDsQ3VqjQafwyIy06cvAZrEIWi8szOU2hr0KbZfQY6K0BWSqCdP0HhjrBv9sucFaVpr39GGG5udPS7u/yPEYE63Ahk8ukd5QMlBNedsS20tHOHwe09g+YDMnJNMuBW6RQzqcbP8EeeGPr74ClfcmXQyttlckBH/YjRYM5nppTFhEFXLjG5iRf7jD1YxJv0J7HDBDZNZl0kNmBo8zIGGn/D8evJq4rouRq5FVDZFubU4IzZXDjcMndmJCYPAxW5PpkNTepeswonHBgAHM9HpaDMsek7qH8skFKlZGYO7PLYiOiVUpYM9WpW/IxtgRzyxyoWck4nTfXa8/nKf8NEq1+QB/Dancn29xN1rnumgahiWBnM7QiaaVddcnn6MKZUhwxqVt+DPWtclFhL4/lAtAg9n6vxrlLsMq4YerNxgXyzYIwDGatFtjDyAtVBq5EGUJDccKR4oBZuuuxbswaJUEploVBPC23ebwIbfFebAaPOTiWzQ3EvwQvPJTp/W1zmHjQDrdWPYcU2e5SANihdiLoekswOPDm0ZevwVX+08Nv4mO6E2YalxB3OfJrirzCYhirnf9j8OfX1EUJTCQjzfgp9vxcdTqjleIe8mdHtNbZQD0obLfTj4Cux2hRzS+8CwlH6ezj0eez27H2Wtr8wid3e6cFoJ2ntvZJAyogZKq/n4Ma3KXa4Gvt6od7+YWQrMTJy0XfN3tkVWKrAacm1SLuE7xfYULjB7uFanKK6K1vWsBNbE86JunDgwI4WnwRbinnF02k04NHS1kqB28ZAn35761JLlodBmTBzdRz8YGe2MiCOQHr4rnZAZGi/7bypScrN0/0ZWFLN1b6NAB8wBFa9pXt+o3Z7Tg8BEHU2FbJZsI78QoXva3ckX2yJR7jxAZAiwlU8/jHfnZc8b8bjTQQ6ogIgXSBF5ZornxazAN6mKPEFW6WDGMl6SDasaCnFCmRa1FChgvjNr+d50FgwfZbmgHI5UFXwzV6RSuex9o/rasFh4vuqkgKn9RNsjHJMKbwq7r55Ou8CZ/Hyw7ZARF7/d/3MBuOjMwl7bpjwOVwvkJBy34TqfYzzcR3Ank6DlmP19jTEBWLJeiqnCV061dIw65/lT6B2u2VkRyuYIwxD6rBoRZq2AY2FA/+yIvRlOSddz+MZb21DnqgX8EFd4RlZxPF1G23eBjW5ripDQS540MsZom5Ic6E8MxIcM5HulGIMzONkqJjyHr8shDShcjT9BnpgP9zWy/EiHdC4WqestDgj5RFKAorLPBpeht0NpsraY5nlHspTXoS0BvgmQLwSb82bG6PmiCdli5aBv1Jam9NlvRb3ytAusakAry+z2DPDFJKaDrbarhr32vtQynzcKOdKTdn9ZJyr7cBq/WoYiyha/60F06OigQV2cm0/gn0ZwRt9qQFQ0en44CCLOpmTW42Y87lVEOpTgOHp1AKmWVvFsFsJ5UBW12Dy/1IdYrrM15YF35G+4spHU19YylckH/yqOdCM/VJRmqWla6ZBEI68HhW+g0lrRmttTw70Qqxp9rfcjS2HhVGzEtarEooKpJXXPIsVAhV7enajb2u0OefNBtqnW9y0KBhvbzTRUswNzP9jQP/iiOHj1mEluqUrOzHJMRb96e42k45eofiYFmqb8hA1NbkIjUkrvjTSUmnJH+P5ZaRBZ+P32XwWMPbaDpQQySU3qkwfbgqlphVWHR49GNjj8gIuBahKeHffGpO6gVrOn3UdDQhN5xns/C6MLpPqyJGkvP0sc0kfEjhHNqi3cgkO7EbIeKZw9Uf2J77Y6FrYKZh+KXKFsh7236ni9Hm6YlK15h88MJjPGcd4iTsX+yuntVrGynK9zYNQ65sNvtQ6+D01zYwXg3YOgHPix10PyzxV3sopI0fwT32p4WysaSvvBuV4QpJPfVak3B9rnE44vbED/RptdhkvGQC3f50SaOKZXvCo9xWpbtemF2hS9v952wtA9mLk='
    local obfuscated_key='ZTVjYzlhZGUyNmExNmNiMjg1YmVhODI5MWQ5OWFmYjUwOWEzZGU0MjU4OWY3MDI2YjEwYTkwNjU1ZDI3YmFjZQ=='

    local decoded_key=$(echo "$obfuscated_key" | base64 -d)
    if [ -z "$decoded_key" ]; then
        echo "Error: Failed to decode key." >&2
        return 1
    fi

    local decrypted_content=$(echo "$encrypted_content" | base64 -d | openssl enc -d -aes-256-cbc -pbkdf2 -pass pass:"$decoded_key" 2>/dev/null)
    if [ -z "$decrypted_content" ]; then
        echo "Error: Decryption failed." >&2
        return 1
    fi

    # Bersihkan jejak sebelum eksekusi
    unset encrypted_content obfuscated_key decoded_key

    eval "$decrypted_content"
}

__run_protected
